{"ast":null,"code":"import { configureStore } from \"@reduxjs/toolkit\";\nimport authReducer from \"./authSlice\";\n\n// ðŸ”¹ Láº¥y dá»¯ liá»‡u user vÃ  token tá»« localStorage náº¿u cÃ³\nconst persistedUser = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : null;\nconst persistedAccessToken = localStorage.getItem(\"accessToken\");\nconst persistedRefreshToken = localStorage.getItem(\"refreshToken\");\nconst store = configureStore({\n  reducer: {\n    auth: authReducer\n  },\n  preloadedState: {\n    auth: {\n      user: persistedUser,\n      accessToken: persistedAccessToken,\n      refreshToken: persistedRefreshToken,\n      loading: false,\n      error: null\n    }\n  },\n  devTools: true,\n  // ðŸ§© Báº­t Redux DevTools Ä‘á»ƒ debug\n  preloadedState: persistedState // âœ… Náº¡p láº¡i user khi reload\n});\n\n// ðŸ”¹ Theo dÃµi state Redux -> cáº­p nháº­t localStorage má»—i khi user thay Ä‘á»•i\nstore.subscribe(() => {\n  const state = store.getState().auth;\n  if (state.user && state.accessToken) {\n    localStorage.setItem(\"user\", JSON.stringify(state.user));\n    localStorage.setItem(\"accessToken\", state.accessToken);\n    localStorage.setItem(\"refreshToken\", state.refreshToken);\n  } else {\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"accessToken\");\n    localStorage.removeItem(\"refreshToken\");\n  }\n});\nexport default store;","map":{"version":3,"names":["configureStore","authReducer","persistedUser","localStorage","getItem","JSON","parse","persistedAccessToken","persistedRefreshToken","store","reducer","auth","preloadedState","user","accessToken","refreshToken","loading","error","devTools","persistedState","subscribe","state","getState","setItem","stringify","removeItem"],"sources":["/Users/wocten/Documents/group2-project/frontend/src/redux/store.js"],"sourcesContent":["import { configureStore } from \"@reduxjs/toolkit\";\nimport authReducer from \"./authSlice\";\n\n// ðŸ”¹ Láº¥y dá»¯ liá»‡u user vÃ  token tá»« localStorage náº¿u cÃ³\nconst persistedUser = localStorage.getItem(\"user\")\n  ? JSON.parse(localStorage.getItem(\"user\"))\n  : null;\nconst persistedAccessToken = localStorage.getItem(\"accessToken\");\nconst persistedRefreshToken = localStorage.getItem(\"refreshToken\");\n\nconst store = configureStore({\n  reducer: { auth: authReducer },\n  preloadedState: {\n    auth: {\n      user: persistedUser,\n      accessToken: persistedAccessToken,\n      refreshToken: persistedRefreshToken,\n      loading: false,\n      error: null,\n    },\n  },\n  devTools: true, // ðŸ§© Báº­t Redux DevTools Ä‘á»ƒ debug\n  preloadedState: persistedState, // âœ… Náº¡p láº¡i user khi reload\n});\n\n// ðŸ”¹ Theo dÃµi state Redux -> cáº­p nháº­t localStorage má»—i khi user thay Ä‘á»•i\nstore.subscribe(() => {\n  const state = store.getState().auth;\n  if (state.user && state.accessToken) {\n    localStorage.setItem(\"user\", JSON.stringify(state.user));\n    localStorage.setItem(\"accessToken\", state.accessToken);\n    localStorage.setItem(\"refreshToken\", state.refreshToken);\n  } else {\n    localStorage.removeItem(\"user\");\n    localStorage.removeItem(\"accessToken\");\n    localStorage.removeItem(\"refreshToken\");\n  }\n});\n\nexport default store;\n"],"mappings":"AAAA,SAASA,cAAc,QAAQ,kBAAkB;AACjD,OAAOC,WAAW,MAAM,aAAa;;AAErC;AACA,MAAMC,aAAa,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,GAC9CC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,GACxC,IAAI;AACR,MAAMG,oBAAoB,GAAGJ,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;AAChE,MAAMI,qBAAqB,GAAGL,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;AAElE,MAAMK,KAAK,GAAGT,cAAc,CAAC;EAC3BU,OAAO,EAAE;IAAEC,IAAI,EAAEV;EAAY,CAAC;EAC9BW,cAAc,EAAE;IACdD,IAAI,EAAE;MACJE,IAAI,EAAEX,aAAa;MACnBY,WAAW,EAAEP,oBAAoB;MACjCQ,YAAY,EAAEP,qBAAqB;MACnCQ,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE;IACT;EACF,CAAC;EACDC,QAAQ,EAAE,IAAI;EAAE;EAChBN,cAAc,EAAEO,cAAc,CAAE;AAClC,CAAC,CAAC;;AAEF;AACAV,KAAK,CAACW,SAAS,CAAC,MAAM;EACpB,MAAMC,KAAK,GAAGZ,KAAK,CAACa,QAAQ,CAAC,CAAC,CAACX,IAAI;EACnC,IAAIU,KAAK,CAACR,IAAI,IAAIQ,KAAK,CAACP,WAAW,EAAE;IACnCX,YAAY,CAACoB,OAAO,CAAC,MAAM,EAAElB,IAAI,CAACmB,SAAS,CAACH,KAAK,CAACR,IAAI,CAAC,CAAC;IACxDV,YAAY,CAACoB,OAAO,CAAC,aAAa,EAAEF,KAAK,CAACP,WAAW,CAAC;IACtDX,YAAY,CAACoB,OAAO,CAAC,cAAc,EAAEF,KAAK,CAACN,YAAY,CAAC;EAC1D,CAAC,MAAM;IACLZ,YAAY,CAACsB,UAAU,CAAC,MAAM,CAAC;IAC/BtB,YAAY,CAACsB,UAAU,CAAC,aAAa,CAAC;IACtCtB,YAAY,CAACsB,UAAU,CAAC,cAAc,CAAC;EACzC;AACF,CAAC,CAAC;AAEF,eAAehB,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}